<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<style>
body {background-color: rgba(0,64,0,0);
     font-size: 1.25em;
	 color: white;}

div img {
	width=400px;
    -webkit-transform: rotate(0deg);
    -webkit-transition: -webkit-transform 2s ease-out;
}
	

input {
 postion:fixed;
 display: block; 
 top: 0px;
}

.button {
	background : black;
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 1.25em;
	transition: all 1s ease 0s;
}

input[type=number] {
    width: 100%;
    padding: 12px 20px;
    margin: 8px 0;
    box-sizing: border-box;
}

table.formdata {
  border: 1px solid #5F6F7E;
  border-collapse: collapse;
  margin: 1em 0 2em 0;
}
table.formdata th {
  border: 1px solid #5F6F7E;
  background-color: green;
  color: green;
  text-align: center;
  font-weight: normal;
  padding: 0.2em 0.4em 0.2em 0.4em;
  margin: 0;
}
table.formdata td {
  background-color: green;
  margin: 0;
  padding: 0;
  text-align: center;
  border: 1px solid #E2E2E2;
}
table.formdata input{
  width: 110px;
  padding: 0.2em 0.4em 0.2em 0.4em;
  background-color: red;
  color: white;
  margin: 0;
  border-width: 0;
  text-align: center;
  border-style: none;
  font-size: 1.25em;
  font-weight: bold;
}

::-webkit-input-placeholder { /* WebKit, Blink, Edge */
    color:    yellow;
	font-family: "Arial", Times, serif;
	font-size: 1.15em;
	font-weight: normal;
}
:-moz-placeholder { /* Mozilla Firefox 4 to 18 */
   color:    #909;
   opacity:  1;
}
::-moz-placeholder { /* Mozilla Firefox 19+ */
   color:    #909;
   opacity:  1;
}
:-ms-input-placeholder { /* Internet Explorer 10-11 */
   color:    #909;
}
::-ms-input-placeholder { /* Microsoft Edge */
   color:    #909;
}

</style>
</head>
<body onload="stankonta()">
<div style="float: left; position: relative; left: 10%;">
<div id="znacznik" style="text-align:center"><img width="25" height="25" src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/Field_hockey_ball.svg/1024px-Field_hockey_ball.svg.png" /></div>
<div id="obrazek" style="text-align:center"><img id="kolo" width="400" height="400" src="http://upload.wikimedia.org/wikipedia/commons/7/7d/European_roulette_wheel.svg" /></div>

<div>
<input id="clickMe" type="button" class="button" value="Zakrec" onclick="rotate();" style="float: left; position: relative; left: 35%;" />
<input id="StanKonta" type="button" class="button" value="0" onclick="" style="float: left; position: relative; left: 35%;" />
</div>
<div>

</div>
</div>


<div style="float: left; position: relative; left: 30%;">
<form>
<table class="formdata" summary="This table contains a form" style="text-align:center">
  <caption>Zakłady</caption>
  <tr>
    <td><input type="text" name="3" id="37" placeholder="1st 12" style= "background-color: green"  /></td>
    <td><input type="text" name="2" id="38" placeholder="1 to 18" style= "background-color: green" /></td>
    <td><input type="text" name="1" id="39" placeholder="EVEN" style= "background-color: green" /></td>
  </tr>
  <tr>
    <td><input type="text" name="1" id="1" placeholder="1" style= "background-color: red" /></td>
    <td><input type="text" name="2" id="2" placeholder="2" style= "background-color: black"/></td>
    <td><input type="text" name="3" id="3" placeholder="3" style= "background-color: red"/></td>
  </tr>
  <tr>
    <td><input type="text" name="4" id="4" placeholder="4" style= "background-color: black"/></td>
    <td><input type="text" name="5" id="5" placeholder="5"  /></td>
    <td><input type="text" name="5" id="6" placeholder="6" style= "background-color: black" /></td>
  </tr>
  <tr>
    <td><input type="text" name="9" id="7" placeholder="7" /></td>
    <td><input type="text" name="8" id="8" placeholder="8" style= "background-color: black" /></td>
    <td><input type="text" name="7" id="9" placeholder="9" /></td>
  </tr>
  <tr>
    <td><input type="text" name="12" id="10" placeholder="10" style= "background-color: black" /></td>
    <td><input type="text" name="11" id="11" placeholder="11" /></td>
    <td><input type="text" name="10" id="12" placeholder="12" style= "background-color: black" /></td>
  </tr>
  <tr>
    <td><input type="text" name="3" id="40" placeholder="2nd 12" style= "background-color: green" /></td>
    <td><input type="text" name="2" id="41" /></td>
    <td><input type="text" name="1" id="42" style= "background-color: black" /></td>
  </tr> 
  <tr>
    <td><input type="text" name="3" id="13" placeholder="13" style= "background-color: black" /></td>
    <td><input type="text" name="2" id="14" placeholder="14" /></td>
    <td><input type="text" name="1" id="15" placeholder="15" style= "background-color: black" /></td>
  </tr>
  <tr>
    <td><input type="text" name="6" id="16" placeholder="16" /></td>
    <td><input type="text" name="5" id="17" placeholder="17" style= "background-color: black" /></td>
    <td><input type="text" name="4" id="18" placeholder="18" /></td>
  </tr>
  <tr>
    <td><input type="text" name="9" id="19" placeholder="19" style= "background-color: black" /></td>
    <td><input type="text" name="8" id="20" placeholder="20" /></td>
    <td><input type="text" name="7" id="21" placeholder="21" style= "background-color: black" /></td>
  </tr>
  <tr>
    <td><input type="text" name="12" id="22" placeholder="22" /></td>
    <td><input type="text" name="11" id="23" placeholder="23" style= "background-color: black" /></td>
    <td><input type="text" name="10" id="24" placeholder="24" /></td>
  </tr>
  <tr>
    <td><input type="text" name="3" id="43" placeholder="3rd 12" style= "background-color: green" /></td>
    <td><input type="text" name="2" id="44" placeholder="ODD" style= "background-color: green" /></td>
    <td><input type="text" name="1" id="45" placeholder="19 to 36" style= "background-color: green; text-align: left" /></td>
  </tr>
    <tr>
    <td><input type="text" name="3" id="25" placeholder="25" /></td>
    <td><input type="text" name="2" id="26" placeholder="26" style= "background-color: black" /></td>
    <td><input type="text" name="1" id="27" placeholder="27" /></td>
  </tr>
  <tr>
    <td><input type="text" name="6" id="28" placeholder="28" style= "background-color: black" /></td>
    <td><input type="text" name="5" id="29" placeholder="29" /></td>
    <td><input type="text" name="4" id="30" placeholder="30" style= "background-color: black" /></td>
  </tr>
  <tr>
    <td><input type="text" name="9" id="31" placeholder="31" /></td>
    <td><input type="text" name="8" id="32" placeholder="32" style= "background-color: black" /></td>
    <td><input type="text" name="7" id="33" placeholder="33" /></td>
  </tr>
  <tr>
    <td><input type="text" name="12" id="34" placeholder="34" style= "background-color: black" /></td>
    <td><input type="text" name="11" id="35" placeholder="35" /></td>
    <td><input type="text" name="10" id="36" placeholder="36" style= "background-color: black" /></td>
  </tr>
    <tr>
    <td><input type="text" name="12" id="46" placeholder="2 to 1" style= "background-color: green" /></td>
    <td><input type="text" name="11" id="47" placeholder="2 to 1" style= "background-color: green"/></td>
    <td><input type="text" name="10" id="48" placeholder="2 to 1" style= "background-color: green" /></td>
  </tr>
</table>
</form>	
</div>

	
	
</body>
</html>

<script>

//<div id="stol" style="text-align:center"><img width="760" height="381" src="http://datagenetics.com/blog/july12015/table.jpg" /></div>

//DANE GRACZA
//var USER = "test23";
//var PASS = "testpass";

var UserPassword = parent.UserPassword;
var UserName = parent.UserName;


//UserPassword = "password";
//UserName = "momo";

srodki = 0;
wylosowana = 0;

rezultat = 0; //Wynik krecenia
wybor = []; //Na co stawia gracz
postawiona_kwota = 0;
wymagany_zaklad = 35; //Minimalna kwota zakladu
wybrany_zaklad = 0; //Numer wybranego zakladu
test_mode = false;

reset = true;

function pobierzDane () {	
		$.ajax
			(
				{
				url : 'http://kasynobackend-wygoda.rhcloud.com/backend/check',
				data : 
				{
					username: UserName,
					userPassword: UserPassword,
					function : "roulette",
					betlist: wybor,
					betamount: postawiona_kwota,
					roulettespin: wylosowana
				},
				type : 'POST',
				dataType : 'json',
				success : function(data) 
				{
			
					rezultat = data["amount"];
					console.log("Otrzymane dane:"+rezultat);
					
					
					if (sprawdz_co_postawiono())
					{

	
						console.log("Tablica wybranych pol:"+wybor);
						rotuj();
		
					}
					else
					{
						//Nie prawidlowe postawienie, brak srodkow na koncie itd
						alert("Nie mozna");
					}
					stankonta(); // trzeba sprawdzić co się dzieje z naszym kontem po grze :)
					
				},
				error : function() 
				{
					alert('Wystąpił błąd.:(. Testowo polece dalej z wynikiem = 15');
					test_mode = true;
					rezultat = -15;
					console.log(rezultat);
					
					if (sprawdz_co_postawiono())
					{

						reset = 0 + "deg";
						document.getElementById("kolo").style.webkitTransition = '-webkit-transform 0s ease-out';
						document.getElementById("kolo").style.webkitTransform = 'rotate('+reset+')'; //Rotacja obrazka kola
	
						console.log("Tablica wybranych:"+wybor);
						rotuj();
		
					}
					else
					{
						//Nie prawidlowe postawienie, brak srodkow na koncie itd
						alert("Nie mozna");
					}
					
					stankonta(); // trzeba sprawdzić co się dzieje z naszym kontem po grze :)

				}
				}
			);
}
function pobierzlosowa() //Pobiera losowana liczbe
{
$.ajax
	(
		{
			url : 'http://kasynobackend-wygoda.rhcloud.com/backend/game',
			data : 
			{
				username: UserName,
				userPassword: UserPassword,
				function : "roulette",
				betlist: wybor,
				betamount: postawiona_kwota,
			},
			type : 'POST',
			dataType : 'json',
			success : function(data) 
			{
			
				wylosowana = data["result"];
				console.log("Otrzymany los:"+wylosowana);
					
			}
		}
	);

}

function stankonta(){ //Aktualizuje stan konta
$.ajax
	(
		{
			url : 'http://kasynobackend-wygoda.rhcloud.com/backend/user',
			data : 
			{
				function : "getUser",
				username: UserName,
				userPassword: UserPassword
			},
			type : 'POST',
			dataType : 'json',
			success : function(data) 
			{
			
				userData = data.user.split(", ");
				srodki=userData[2];
				aktualizujstan();
				console.log(srodki);
					
			},
			error : function() 
			{
				//alert('Wystąpił błąd.:(: Testowo przejscie z 1500 na koncie' );
				//test_mode = true;
				//srodki=1500;
				aktualizujstan();
				
			},
		}
	);
}

function pobierzDaneGracza () { //Pobiera stan konta gracza
	$.ajax
	(
		{
			url : 'http://kasynobackend-wygoda.rhcloud.com/backend/user',
			data : 
			{
				function : "getUser",
				username: UserName,
				userPassword: UserPassword
			},
			type : 'POST',
			dataType : 'json',
			success : function(data) 
			{
			
				userData = data.user.split(", ");
				srodki=userData[2];
				console.log(srodki);
				aktualizujstan();
		
		
				pobierzDane();
					
			},
			error : function() 
			{
				alert('Wystąpił błąd.:(: Testowo przejscie z 1500 na koncie' );
				test_mode = true;
				srodki=1500;
				aktualizujstan();
				pobierzDane();
			},
		}
	);
}
	
function aktualizujstan(){
	document.getElementById("StanKonta").value = srodki;
}



function rotuj(){

	wartosc = wylosuj(wylosowana)+(Math.floor(Math.random() * 55))*360+(Math.floor(Math.random() * 3));
	angle = wartosc + "deg";
	document.getElementById("kolo").style.webkitTransition = '-webkit-transform 2s ease-out';
	document.getElementById("kolo").style.webkitTransform = 'rotate('+angle+')';
	
	wynik();

}

function rotate(){
	test_mode = false;
	
	reset = 0 + "deg";
	document.getElementById("kolo").style.webkitTransition = '-webkit-transform 0s ease-out';
	document.getElementById("kolo").style.webkitTransform = 'rotate('+reset+')';
	
	//Wprawia tymczasowa rotacje
	document.getElementById("clickMe").style.color = "#000000";
	document.getElementById("clickMe").value = "...";
	document.getElementById("clickMe").style.background = "#000000";
	reset = 45278 + "deg";
	document.getElementById("kolo").style.webkitTransition = '-webkit-transform 10s ease-out';
	document.getElementById("kolo").style.webkitTransform = 'rotate('+reset+')';
	
	
	
	pobierzDaneGracza();
	
}

function wylosuj(liczba){ //Wartosc rotacji dla wylosowanej liczby
	if (liczba==26)
		return 9.72; //  360/37~=9.72
	if (liczba==3)
		return 2 * 9.72;
	if (liczba==35)
		return 3 * 9.72;
	if (liczba==12)
		return 4 * 9.72;
	if (liczba==28)
		return 5 * 9.72;
	if (liczba==7)
		return 6 * 9.72;
	if (liczba==29)
		return 7 * 9.72;
	if (liczba==18)
		return 8 * 9.72;
	if (liczba==22)
		return 9 * 9.72;
	if (liczba==9)
		return 10 * 9.72;
	if (liczba==31)
		return 11 * 9.72;
	if (liczba==14)
		return 12 * 9.72;
	if (liczba==20)
		return 13 * 9.72;
	if (liczba==1)
		return 14 * 9.72;
	if (liczba==33)
		return 15 * 9.72;
	if (liczba==16)
		return 16 * 9.72;
	if (liczba==24)
		return 17 * 9.72;
	if (liczba==5)
		return 18 * 9.72;
	if (liczba==10)
		return 19 * 9.72;
	if (liczba==23)
		return 20 * 9.72;
	if (liczba==8)
		return 21 * 9.72;
	if (liczba==30)
		return 22 * 9.72;
	if (liczba==11)
		return 23 * 9.72;
	if (liczba==36)
		return 24 * 9.72;
	if (liczba==13)
		return 25 * 9.72;
	if (liczba==27)
		return 26 * 9.72;
	if (liczba==6)
		return 27 * 9.72;
	if (liczba==34)
		return 28 * 9.72;
	if (liczba==17)
		return 29 * 9.72;
	if (liczba==25)
		return 30 * 9.72;
	if (liczba==2)
		return 31 * 9.72;
	if (liczba==21)
		return 32 * 9.72;
	if (liczba==4)
		return 33 * 9.72;
	if (liczba==19)
		return 34 * 9.72;
	if (liczba==15)
		return 35 * 9.72;
	if (liczba==32)
		return 36 * 9.72;
	if (liczba==0)
		return 0;


}
function sprawdz_co_postawiono(){
	wybor[0] = 0; //0 - nieuzywane, 1-36 liczby #37-1st12 #38-1to18 #39-even itd.
	ilosc_wypelnionych = 0;
	wybrany_zaklad=0;
	postawiona_kwota=0;
	for (i = 1; i <= 48; i++)
	{
		if (document.getElementById(i).value != "")
		{
			wybor[i] = parseInt(document.getElementById(i).value);
		}
		else
		{
			wybor[i] = 0;
		}
		if (wybor[i] < 0)
		{
			wybor[i] = 0;
		}
		if (isNaN(wybor[i]))
		{
			wybor[i] = 0;
		}
		if (wybor[i] != 0)
		{
			ilosc_wypelnionych=ilosc_wypelnionych+1;
			postawiona_kwota = postawiona_kwota+wybor[i];
			wybrany_zaklad=i;
		}
		
		
	}
	console.log(wybor);
	//console.log("Ilosc wypelnionych:"+ilosc_wypelnionych);
	if (!reset)
	{
		return false; //Za szybko
	}
	if (ilosc_wypelnionych <1)
	{
		//Za duzo zakladow
		document.getElementById("clickMe").value = "Za malo zakladow";
		document.getElementById("clickMe").style.background = 'red';
		return false;
		
	}
	/*if(wybrany_zaklad>=1 && wybrany_zaklad<=36)
	{
		mnoznik = 35;
	}
	else if(wybrany_zaklad==37 || wybrany_zaklad==40 || wybrany_zaklad==43)//1st 12
	{
		mnoznik = 2;
	}
	else if(wybrany_zaklad==46 ||wybrany_zaklad==47 || wybrany_zaklad==48)//2 to 1
	{
		mnoznik = 2;
	}
	else
	{
		mnoznik = 1;
	}*/
	if (srodki < postawiona_kwota)
	{
		document.getElementById("clickMe").value = "Brak funduszy";
		document.getElementById("clickMe").style.background = 'red';
		return false;
	}
	if (postawiona_kwota <= wymagany_zaklad)
	{
		//Za maly zaklad
		document.getElementById("clickMe").value = "Za maly zaklad";
		document.getElementById("clickMe").style.background = 'red';
		return false;
	}
	else
	{
		document.getElementById("clickMe").value = "Zakręcam";
		document.getElementById("clickMe").style.background = "#ccffcc";
		return true;
	}

}




function wynik(){ //Chyba nie potrzebne bo jest w api...

	if (rezultat>0)
	{
		wygrana();
	}
	else
	{
		przegrana();
	}

	/*
	if (rezultat==0)
	{
		przegrana();
	}
	else if (rezultat==wybrany_zaklad)//1-36
	{
		wygrana();
	}
	else if (wybrany_zaklad == 37)//1st 12
	{
		if (rezultat>=1 && rezultat<=12)
		{
			wygrana();
		}
	}
	else if (wybrany_zaklad == 38) //1to18
	{
		if (rezultat>=1 && rezultat<=18)
		{
			wygrana();
		}
	}
	else if (wybrany_zaklad == 39) //EVEN
	{
		if (rezultat % 2 === 0)
		{
			wygrana();
		}
	}
	else if (wybrany_zaklad == 40) //2nd
	{
		if (rezultat>=13 && rezultat<=24)
		{
			wygrana();
		}
	}
	else if (wybrany_zaklad == 41) //Red
	{
		if (rezultat==1 || rezultat==3||rezultat==5||rezultat==7||rezultat==9||rezultat==11||rezultat==14||rezultat==16||rezultat==18||rezultat==20||rezultat==22||rezultat==24||rezultat==25||rezultat==27||rezultat==29||rezultat==31||rezultat==33||rezultat==35)
		{
			wygrana();
		}
	}
	else if (wybrany_zaklad == 42) //Black
	{
		if (rezultat==0||rezultat==1 || rezultat==3||rezultat==5||rezultat==7||rezultat==9||rezultat==11||rezultat==14||rezultat==16||rezultat==18||rezultat==20||rezultat==22||rezultat==24||rezultat==25||rezultat==27||rezultat==29||rezultat==31||rezultat==33||rezultat==35)
		{
			przegrana();
		}
		else
		{
			wygrana();
		}
	}
	else if (wybrany_zaklad == 43) //3rd
	{
		if (rezultat>=25 && rezultat<=36)
		{
			wygrana();
		}
	}
	else if (wybrany_zaklad == 44) //ODD
	{
		if (rezultat % 2 === 1)
		{
			wygrana();
		}
	}
	else if (wybrany_zaklad == 45) //ODD
	{
		if (rezultat>=19 && rezultat<=36)
		{
			wygrana();
		}
	}
	else if (wybrany_zaklad == 46) //2 to 1
	{
		if (rezultat==1||rezultat==4||rezultat==7||rezultat==10||rezultat==13||rezultat==16||rezultat==19||rezultat==22||rezultat==25||rezultat==28||rezultat==31||rezultat==34)
		{
			wygrana();
		}
	}
	else if (wybrany_zaklad == 47) //2 to 1
	{
		if (rezultat==2||rezultat==5||rezultat==8||rezultat==11||rezultat==14||rezultat==17||rezultat==20||rezultat==23||rezultat==26||rezultat==29||rezultat==32||rezultat==35)
		{
			wygrana();
		}
	}
	else if (wybrany_zaklad == 48) //2 to 1
	{
		if (rezultat==3||rezultat==6||rezultat==9||rezultat==12||rezultat==15||rezultat==18||rezultat==21||rezultat==24||rezultat==27||rezultat==30||rezultat==33||rezultat==36)
		{
			wygrana();
		}
	}

	else
	{
		przegrana();
	}
	*/

}

function wygrana(){
	console.log("No Wygrales");
	//Jakies opracowanie dla wygranej
	//zysk funbucksów itd.
	//Dodaj kwote do gracza
	//srodki=srodki+postawiona_kwota*mnoznik;
	
	//stankonta();
	
	console.log("Twoje srodki to :"+srodki);
	document.getElementById("clickMe").style.transition = "all 0s ease 0s";
	document.getElementById("clickMe").style.color = "#000000";
	document.getElementById("clickMe").value = "Wygrałeś";
	document.getElementById("clickMe").style.transition = "all 2s ease 2s";
	document.getElementById("clickMe").style.color = "#ffffff";
	document.getElementById("clickMe").style.background = "#4cff4c";

}
function przegrana(){
	console.log("Przegrałeś...");
	//Jakies opracowanie dla przegranej
	//może jakiś irytujący dźwięk
	//Odejmij kwote od gracza
	//srodki=srodki-postawiona_kwota;
	//stankonta();
	console.log("Twoje srodki to :"+srodki);
	document.getElementById("clickMe").style.transition = "all 0s ease 0s";
	document.getElementById("clickMe").style.color = "#000000";
	document.getElementById("clickMe").value = "Przegrałeś";
	document.getElementById("clickMe").style.transition = "all 2s ease 2s";
	document.getElementById("clickMe").style.color = "#ffffff";
	document.getElementById("clickMe").style.background = "#a30f2d";
}


	



</script>
